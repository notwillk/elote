meta:
  engine: 4.1.0          # needed for KiCad 8 footprints from ceoloide
  name: 3key-niceview-nicenano
  version: v0.1
  author: you

units:
  kx: 19                 # key spacing X
  ky: 19                 # key spacing Y

points:
  zones:
    row3:
      key:
        width: 18
        height: 18
        padding: ky
      columns:
        k1:
          key:
            column_net: C0
        k2:
          key:
            column_net: C1
        k3:
          key:
            column_net: C2
      rows:
        home:
          key:
            row_net: R0

outlines:
  # Dumb simple rectangular board around the keys
  board:
    - what: rectangle
      where: true          # use the default origin
      size: [60, 40]       # tweak to taste
      operation: add

pcbs:
  main:
    template: kicad8       # required for ceoloide KiCad 8 footprints
    references: false

    outlines:
      - outline: board
        layer: Edge.Cuts

    footprints:
      # 3 MX switches, wired as a 1Ã—3 matrix (C0..C2 x R0)
      - where: true
        what: mx           # built-in Ergogen MX footprint
        params:
          from: "{{column_net}}"
          to: "{{row_net}}"

      # nice!nano MCU (ceoloide footprint)
      # Placed above the middle key (row3_k2_home) with a small offset
      - what: ceoloide/mcu_nice_nano
        where:
          ref: row3_k2_home
          shift: [0, 25]
        params:
          designator: MCU
          side: F
          reversible: false
          reverse_mount: false
          include_traces: true
          include_extra_pins: false
          invert_jumpers_position: false
          only_required_jumpers: false
          use_rectangular_jumpers: false
          via_size: 0.8
          via_drill: 0.4
          show_instructions: true
          show_silk_labels: true
          show_silk_labels_on_both_sides: false
          show_via_labels: true

      # nice!view OLED (ceoloide footprint)
      # Placed just above the middle key as well
      - what: ceoloide/display_nice_view
        where:
          ref: row3_k2_home
          shift: [0, 10]
        params:
          designator: OLED
          side: F
          # Typical wiring: MOSI -> SDA, SCK -> SCL
          MOSI: SDA
          SCK: SCL
          reversible: true
          include_labels: false
          invert_jumpers_position: true